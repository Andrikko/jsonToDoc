<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Json</title>
    <base href="/">
</head>
<body>
<h1>Json to Doc</h1>

<form name="form">
    <textarea id="textarea" cols="60" rows="10" placeholder="Put json format"></textarea>
    <br>
    <input type="submit" value="Send">
<!--    <input type="button" id="sendJson" value="Send">-->
</form>

<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>
<script>
    $(function () {
        $("form").on("submit", function (event) {
            event.preventDefault();

            let json = JSON.parse($('textarea')[0].value);

            // fetch('/send-json',{
            //     method: 'POST',
            //     data: JSON.stringify(json),
            //     contentType: 'application/json',
            // })
            //     .then(resp => resp.json())
            //     .then(json => console.log(json));

            $.ajax({
                type: 'post',
                url: '/json/send-json',
                data: JSON.stringify(json),
                contentType: 'application/json',
            })
                .done(() => console.log('success'))
                .fail(() => console.log('fail'));
        })
    });
</script>
</body>
</html>