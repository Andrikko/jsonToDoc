<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Json</title>
    <base href="/">
    <link rel="stylesheet" href="stylesheets/json.css">
</head>
<body>
<h1>Json to Doc</h1>

<form name="form">
    <textarea id="textarea" cols="60" rows="10" placeholder="Put json format"></textarea><br>
    <input type="submit" value="Send">
</form>

<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>
<script>
    $(function () {
        $("form").on("submit", function (event) {
            event.preventDefault();

            let json = JSON.parse($('textarea')[0].value);

            $.ajax({
                type: 'post',
                url: '/json/send-json',
                data: JSON.stringify(json),
                contentType: 'application/json',
            })
                .done((res) => {
                    saveByteArray(res);
                })
                .fail(() => console.log('fail'));
        });

        function saveByteArray(reportName, byte) {
            let blob = new Blob([byte], {type: "application/pdf"});
            let link = document.createElement('a');
            link.href = window.URL.createObjectURL(blob);
            let fileName = reportName;
            link.download = fileName;
            link.click();
        }
    });
</script>
</body>
</html>